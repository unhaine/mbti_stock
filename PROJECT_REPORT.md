# [프로젝트 보고서] MBTI 기반 주식 추천 서비스

## 1. 프로젝트 개요

## **MBTI 기반 주식 추천 서비스**는 복잡한 금융 데이터를 사용자의 성격 유형(MBTI)과 결합하여, 개인에게 가장 친숙한 언어로 주식 종목을 추천해주는 사용자 맞춤형 서비스입니다. 단순히 수익률을 나열하는 기존의 방식에서 벗어나, 사용자의 가치관과 투자 성향에 맞춘 테마별 큐레이션을 제공합니다. 이를 통해 초보 투자자도 자신의 성향에 맞는 종목을 즐겁게 발견하고 자연스럽게 주식 투자를 시작할 수 있는 환경을 조성하는 데 목적이 있습니다.

## 2. 개발 과정: MVP에서 고도화까지

### 2.1 MVP(Minimum Viable Product) 단계

- **목표**: 서비스의 시각적 비전 수립 및 핵심 사용자 경험(UX) 흐름 검증
- **주요 내용**: "우리가 전달하고자 하는 가치를 어떤 화면으로 보여줄 것인가?"에 대한 해답을 찾는 데 집중했습니다.
- **사용자 온보딩**: MBTI 선택 및 성향 분석 결과 화면을 구현하여 개인화의 시작점을 만들었습니다.
- **테마별 추천 UI**: 사용자가 테마를 스와이프하며 종목 카드를 탐색할 수 있는 직관적인 인터페이스를 설계했습니다.
- **AI 메시지 레이아웃**: 종목 상세 페이지에서 AI가 친근하게 조언을 건네는 시각적 요소를 구성했습니다.
- **성과**: 추천 엔진의 핵심 골격과 함께, 서비스의 정체성을 직관적으로 전달할 수 있는 디자인 프로토타입을 완성했습니다.

### 2.2 바이브 코딩(Vibe Coding)을 통한 기능 확장 및 고도화

- **목표**: 초기 디자인 프로토타입에 실시간 데이터를 결합하여 실제 동작하는 완성형 시스템 구축
- **실무급 데이터 연동**: AI와의 유기적인 협업인 '바이브 코딩'을 통해 방대한 외부 API와 크롤링 기술을 신속하게 도입했습니다.
- **금융 데이터 연동**: 멘토진의 조언을 바탕으로 공공데이터 포털과 **Open DART(전자공식시스템)** API를 연동했습니다. 이를 통해 단순 주가 정보뿐만 아니라 실제 기업의 재무제표 데이터를 추천 엔진에 반영했습니다.
- **시장 심리 파악**: 네이버 금융 커뮤니티(종토방) 데이터를 크롤링하여 실시간 투자자 의견과 시장의 감성 지표를 확보했습니다.
- **AI 조언 알고리즘 고도화**: 수집된 재무 데이터와 심리 지표를 기반으로 AI 모델을 튜닝하여, 사용자가 보는 'AI 메시지'가 단순 문구가 아닌 실제 데이터 분석에 근거한 전략적 조언이 되도록 발전시켰습니다.

---

## 3. 기능 및 AI 시스템 상세 소개

### 3.1 핵심 서비스 기능

- **MBTI 맞춤형 온보딩**: 사용자의 MBTI를 분석하여 '신중한 전략가', '대담한 통솔자' 등 개인화된 투자 캐릭터를 부여하고 그에 최적화된 추천 로직을 설정합니다.
- **테마별 투자 페르소나**: 가치 투자, 기술주, 배당 투자 등 각 테마를 하나의 페르소나로 정의하여, 테마 변경 시 추천 종목이 드라마틱하게 변화하는 다채로운 경험을 제공합니다.

### 3.2 하이브리드 추천 엔진 (Hybrid Ranking)

단순 필터링을 넘어 데이터의 객관성과 성향의 주관성을 결합하기 위해, **Rule-based 엔진**과 **XGBoost 기반 ML 엔진**을 결합한 하이브리드 시스템을 구축했습니다.

#### ① 시스템 데이터 흐름 (Data Flow)

```text
[데이터 수집] Open DART(재무), 공공포털(시세), 네이버(심리)
▼
[Feature 엔지니어링] 수치형/범주형 변환, MBTI 8차원 임베딩
▼
[하이브리드 랭킹] (ML 모델 점수 50%) + (Persona Rule 점수 50%)
▼
[포스트 프로세싱] 다양성 패널티 적용 및 최종 리스트 산출
```

#### ② 데이터 레이어 및 피처 엔지니어링

- **데이터 통합**: Supabase를 거점으로 실시간 시세, 재무제표, 섹터 정보, 변동성 등급 등을 통합 관리합니다.
- **성능 피처(Feature)**: 모멘텀, 배당수익률, 시가총액, RSI 등 수치 데이터와 함께 섹터 등 범주형 데이터를 추출합니다.
- **유저 특징 임베딩**: 16가지 MBTI 타입을 8가지 성향 차원으로 수치화하여 AI가 사용자의 투자 성격을 학습할 수 있도록 설계했습니다.

#### ③ 알고리즘 및 앙상블

- **XGBoost LambdaRank**: 순위 결정 최적화 알고리즘을 사용하여 MBTI 성향에 따른 종목 우선순위를 기계학습합니다.
- **하이브리드 앙상블**: ML의 정교한 예측과 전문가 기반 Rule 엔진의 직관성을 5:5 비율로 결합하여 안정적이고 납득 가능한 추천 결과를 도출합니다.

#### ④ 구현 참조 (Implementation References)

- **데이터 연동 및 API**: `backend/main.py`, `scripts/sync-daily-prices.ts`
- **Feature 추출 및 변환**: `backend/ml/feature_extractor.py`
- **페르소나/Rule 로직**: `backend/ranker.py`
- **ML 모델 학습 및 앙상블**: `backend/ml/trainer.py`, `backend/hybrid_ranker.py`

---

### 3.3 주요 기술적 해결 사례 (Troubleshooting)

- **추천 결과의 다양성 확보**: 특정 우량주가 모든 테마 상위를 독식하는 문제를 해결하기 위해 '사용된 티커 패널티(Used Ticker Penalty)' 로직을 도입했습니다. 이를 통해 테마별 종목 중복도를 70% 이상 개선했습니다.
- **테마 매핑 레이어 구축**: 한글 테마 명칭과 ML 피처 간의 불일치 문제를 해결하기 위해 전용 매핑 레이어를 추가했습니다. 이를 통해 각 테마의 전략적 정체성이 추천 결과에 정확히 반영되도록 교정했습니다.

---

## 4. 향후 확장 계획 (Future Roadmap)

- **감성 분석 정밀도 강화**: 커뮤니티 크롤링 데이터를 실시간 뉴스 API와 결합하여 심리 지수(Sentiment Index)의 분석 고도화를 추진할 예정입니다.
- **실전 매매 연동**: 증권사 API와의 추가 연동을 통해 추천부터 실제 매매까지 이어지는 원스탑 서비스로 확장을 계획하고 있습니다.
- **대화형 AI 어드바이저**: LLM(Gemini)을 활용해 종목 추천 사유를 사용자 질문에 맞춰 실시간으로 대답해주는 대화형 비서 기능을 탑재할 예정입니다.

---

## 5. 총평

이번 프로젝트는 **금융 데이터와 심리학적 유형론을 AI 기술로 연결**한 뜻깊은 시도였습니다. 기술적으로는 ML 모델과 Rule 엔진을 결합한 하이브리드 시스템을 성공적으로 구현했고, 프로세스 측면에서는 MVP에서 시작해 바이브 코딩으로 완성도를 높여가는 현대적인 개발 방식을 경험했습니다. 기술과 직관의 조화가 사용자에게 더욱 가치 있는 투자 경험으로 이어지기를 기대합니다.
